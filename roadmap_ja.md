# Roadmap

## 地ならし（継続タスク：最初に入れて常時並走）

- [必須] 記録基盤の整備：Recorder/Configを現行Interpreter設計に完全対応（シード再現、スナップショット、イベントログ、メトリクス）。

- [必須] 可視化拡張：時間軸アニメ（既存データでFuncAnimation/GIF出力）、場(Field)のヒートマップ、接続グラフの簡易描画。

- [必須] 性能計測フック：ステップ時間、近傍/接続探索回数、アロケーション、O(N)→O(N log N)移行のトリガーを記録。

## Field追加（発見）アクションの導入

観察性のため発見ログ（位置・強度・誰が・何を）を残す。

“発見→強化学習”には踏み込まない。まずは行動レパートリ拡張として追加。

## エネルギー/再生産ポリシーの確定（既定方針の固定化）

既定メモ：移動に直接コストなし、基礎代謝のみ、Bud再生産（閾値・コスト・初期エネ・オフセットσ）、誕生ステップは維持費免除。

テスト：seed固定で出生数と時刻が再現／E分配が保全。

## Agent導入

“進化単位=Agent”を明文化。Multi-cell Agent≒接続グラフ＋共有Interpreter/Genome＋Profile束。

最初は単一Cell Agentでよいが、構造をAgentに寄せておくと後の多細胞化が楽。

テスト：Agent境界でログ/可視化/メトリクスが集計されること。

## Profileの導入（Interpreterの解釈切替による多Field対応）

あなたの順序だと物理の後だが、物理より前に持ってくると“場の使い分け”の検証ができ、後工程のリスクが減る。

Profile＝入出力スロット/スケーリング/正規化/マスク等の束。固定Profileから開始し、複数Fieldの重み付け切替のみ実装。

テスト：Profile切替で行動が系統的に変わる（A/Bでメトリクス差）。

## 簡易物理シミュ（拘束なし）

位置更新はオイラー/セミインプ。重なりは許容 or 軽い反発力で凌ぐ（まだ拘束は入れない）。

ここまででField×Agent×Energyの相互作用を確認。

性能ゲート：100体×200ステップを数百ms〜数秒以内。閾値超なら近傍・入力構築をまず最適化。

## 衝突拘束あり物理シミュ（段階導入）

最初は円/球の解法分離（検出→解決）＋反復型投影。CCDはまだ不要。

ここは落とし穴：拘束導入で時間ステップが支配されやすい。メッシュ化やSDFは“更に後”。

ゲート：数値爆発なし、ステップ時間の分散が小さい、Energy/再生産に悪影響を与えない。

## CPPN実装（形態/制御の間口を開く）

まずは座標→重み/バイアスの生成で固定トポロジNNをパラメトライズ。

形態発生は後回しでOK。最初はコネクション重みの間接符号化に限定。

## NEAT実装（CPPNを進化）

単一Agent・固定Interpreter/固定Profileで、明確な評価関数の下で挙動テスト。

評価はタスク指向の極小問題（資源探索、滞在、回避など1〜2分野）。多目的化や新奇探索はここでは入れない。

メトリクス：収束速度、表現多様性（ノード/リンク分布）、行動多様性（クラスタ数）。

## Matingの方法決定

NEAT準拠で良いが、構造飛躍が出る門番（相互運用性の担保）を小さく定義。突然変異率・互換距離のレンジを先に固定。

## 複数Agentの進化テスト（固定Interpreter/固定Profile）

相互作用入りの評価設計が難所。ゼロサムを避け、密度/資源/被接触回数など外部指標でバランス。

ここで個体群多様性維持（スペシエーション/ニッチング）を必ず入れる。

## Interpreter・Profileを進化させる方法の決定

まずは離散なプリセットProfile集合の選択進化→その後連続パラメトライズに拡張。

Interpreterはスロット割当の進化から着手（完全フリーフォームより安定）。

## 共進化：Genome×Interpreter×Profile（単一Agent）

評価関数ありの制御下で共進化の学習安定性をチェック。崩壊（デコヒーレンス）検知の早期停止ルールを設ける。

## 共進化：複数Agent

ここで初めてOEEらしさの兆候を探索。評価は外部課題＋挙動多様性/新奇度の複合。

長期ラン実験はログ肥大に注意。スナップショット間引きと要約を必須化。
